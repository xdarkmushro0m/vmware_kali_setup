# create or add this to ur ~/.tmux.conf 

#set prefix
set -g prefix C-q
bind C-q send-prefix
unbind C-b

# enable mouse
setw -g mode-keys vi

set -g history-limit 100000
set -g allow-rename off

bind-key j command-prompt -p "Join pan from:" "join-pane -s :'%%'"
bind-key s command-prompt -p "Send pane to:" "join-pane -t :'%%'"

# enable mouse
set -g mouse
set-window-option -g mode-keys vi

# message display time
set-option -g display-time 4000

# reload tmux file
unbind r
bind r source-file ~/.tmux.conf

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-logging'
set -g @plugin 'tmux-plugins/tmux-yank'

# -- copy mode -----------------------------------------------------------------                                             
                                                                                                                             
bind Enter copy-mode # enter copy mode                                                                                       
                                                                                                                             
run -b 'tmux bind -t vi-copy v begin-selection 2> /dev/null || true'                                                         
run -b 'tmux bind -T copy-mode-vi v send -X begin-selection 2> /dev/null || true'                                            
run -b 'tmux bind -t vi-copy C-v rectangle-toggle 2> /dev/null || true'                                                      
run -b 'tmux bind -T copy-mode-vi C-v send -X rectangle-toggle 2> /dev/null || true'                                         
run -b 'tmux bind -t vi-copy y copy-selection 2> /dev/null || true'                                                          
run -b 'tmux bind -T copy-mode-vi y send -X copy-selection-and-cancel 2> /dev/null || true'                                  
run -b 'tmux bind -t vi-copy Escape cancel 2> /dev/null || true'                                                             
run -b 'tmux bind -T copy-mode-vi Escape send -X cancel 2> /dev/null || true'                                                
run -b 'tmux bind -t vi-copy H start-of-line 2> /dev/null || true'                                                           
run -b 'tmux bind -T copy-mode-vi H send -X start-of-line 2> /dev/null || true'                                              
run -b 'tmux bind -t vi-copy L end-of-line 2> /dev/null || true'                                                             
run -b 'tmux bind -T copy-mode-vi L send -X end-of-line 2> /dev/null || true'

# from IPPSEC - not sure what will this do
# run-shell /opt/tmux-logging/logging.tmux

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Max pane without requiring prefix key
bind-key -n M-z resize-pane -Z

set -g default-terminal "xterm-256color" # colors!

setw -g automatic-rename on   # rename window to reflect current program
set -g renumber-windows on    # renumber windows when a window is closed

set -g set-titles on          # set terminal title

set -g display-panes-time 800 # slightly longer pane indicators display time
set -g display-time 1000      # slightly longer status messages display time

set -g status-interval 10     # redraw status line every 10 seconds

# activity
set -g monitor-activity on
set -g visual-activity off

run -b '~/.tmux/plugins/tpm/tpm'

# stay in the same dir
# Set new panes to open in current directory
bind c new-window -c "#{pane_current_path}"
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# enable mouse
setw -g mouse on

# swap winodw
bind-key < swap-window -t -1 # move window to the left
bind-key > swap-window -t +1 # move window to the right

run '~/.tmux/plugins/tpm/tpm'